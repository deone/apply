{% extends 'base.html' %}

{% block page_title %}My Applications{% endblock %}

{% block app_body %}
<div class="mid width-90">
  <div class="row">
    <div class="page-header">
      <h2>My Applications</h2>
    </div>
    <ul>
    {% for user_app in user.userapplication_set.all %}
      <li><a href="{{ user_app.application.get_absolute_url }}">{{ user_app.application }}</a></li>
    {% empty %}
      <p>You have no applications.</p>
    {% endfor %}
    </ul>

    <div class="page-header">
      <h2>Available Applications</h2>
    </div>

    {% if applications %}
      <form class="search-form" action="" method="get">
        <div class="input-group">
          <input type="text" class="form-control input-lg" name="q" placeholder="Search available applications">
          <span class="input-group-btn">
            <button class="btn btn-default" type="submit">
              <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
            </button>
          </span>
        </div>
      </form>

      <table class="table table-hover">
        <!-- <caption>Optional table caption</caption> -->
        <thead>
          <tr>
            <th>Application Name</th>
            <th>Is Open?</th>
            <th>Fee (GHS)</th>
            <th>Deadline</th>
          </tr>
        </thead>
        <tbody>
          {% for application in applications %}
          <tr>
            <td>
              <a href="{% if application.is_open %}{{ application.get_absolute_url }}{% else %}#{% endif %}">
                {{ application.get_name }}
              </a>
            </td>
            <td>
              {% if application.is_open %}
                Yes
              {% else %}
                No
              {% endif %}
            </td>
            <td>{{ application.fee }}</td>
            <td>{{ application.deadline }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>There are no applications.</p>
    {% endif %}

  </div>
</div>
{% endblock %}
